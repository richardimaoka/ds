<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]>
<meta content="IE=edge" http-equiv="X-UA-Compatible">
<![endif]-->
<meta content="width=device-width, initial-scale=1.0" name="viewport">
<meta content="Asciidoctor 1.5.2" name="generator">
<title>DS220: Data Modeling</title>
<style>/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
[hidden],template{display:none}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
body{margin:0;}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
input[type="search"]{-webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}
input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*:before,*:after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{color:rgba(0,0,0,.8); background:#fafafa;padding:0;margin:0;font-family:"Helvetica Neue",  helvetica, arial, verdana, sans-serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
#map_canvas img,#map_canvas embed,#map_canvas object,.map_canvas img,.map_canvas embed,.map_canvas object{max-width:none!important}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
.antialiased,body{-webkit-font-smoothing:antialiased}
img{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
p.lead,.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{font-size:1.21875em;line-height:1.6}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Helvetica Neue", helvetica, arial,sans-serif;font-weight:300;font-style:normal;color:#BC5E2E;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #ddddd8;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol,ul.no-bullet,ol.no-bullet{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.no-bullet{list-style:none}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite:before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media only screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7;font-weight:bold}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix:before,.clearfix:after,.float-group:before,.float-group:after{content:" ";display:table}
.clearfix:after,.float-group:after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
.keyseq{color:rgba(51,51,51,.8)}
kbd{display:inline-block;color:rgba(0,0,0,.8);font-size:.75em;line-height:1.4;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:-.15em .15em 0 .15em;padding:.2em .6em .2em .5em;vertical-align:middle;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menu{color:rgba(0,0,0,.8)}
b.button:before,b.button:after{position:relative;top:-1px;font-weight:400}
b.button:before{content:"[";padding:0 3px 0 2px}
b.button:after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header {background: url('deck.js/themes/style/images/bg-pattern-blue.png') bottom left; color: #F8F7F6; text-align: center; min-height: 320px; padding: 30px 0;}
	#header .brand {width: 225px; height: 69px; background-size: 225px 69px; margin: 1em auto; background:url('deck.js/themes/style/images/academy-logo-white.svg') no-repeat;}
	#header>h1 {color: #F8F7F6; font-size: 3.75em;; margin-top: .5em;}
#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header:before,#header:after,#content:before,#content:after,#footnotes:before,#footnotes:after,#footer:before,#footer:after{content:" ";display:table}
#header:after,#content:after,#footnotes:after,#footer:after{clear:both}
#content{margin-top:1.25em;}
#content:before{content:none}
	#content .sect1 h2 {color: #374c51; font-weight: 300; text-align: center;}
	#content .sect1 {}
	.sect1{padding-bottom:.625em}
	@media only screen and (min-width:768px){.sect1{padding-bottom:1.25em}}
	.sect1+.sect1{}

	.sect1 h4 {color: #22836A;}
	.sect h4 strong {font-weight: bold;}
	.sectionbody  {background: white; border-radius: 3px; padding: 1.5em;}
	.sectionbody ol {list-style-position: inside; margin-left: 0;}
	.sectionbody ol li {border-bottom: 1px solid #ebeee8;}
	.sectionbody ol li:hover {background: #fafafa;}
	.sectionbody ol li p {margin-bottom: 0;}
	.sectionbody ol li a {text-decoration: none; color: #374c51; display: block; padding: 1em;}

#header>h1:first-child{color: #F8F7F6;margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #ddddd8}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #ddddd8;padding-bottom:8px}
#header .details{border-bottom:1px solid #ddddd8;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span:before{content:"\00a0\2013\00a0"}
#header .details br+span.author:before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark:before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber:after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #ddddd8;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #efefed;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media only screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #efefed;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #efefed;left:auto;right:0}}@media only screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}

#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor:before,h2>a.anchor:before,h3>a.anchor:before,#toctitle>a.anchor:before,.sidebarblock>.content>.title>a.anchor:before,h4>a.anchor:before,h5>a.anchor:before,h6>a.anchor:before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#BC5E2E;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock>caption.title{white-space:nowrap;overflow:visible;max-width:0}
.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>.paragraph:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #ddddd8;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
/*.admonitionblock {margin: 1.5em 0;}
   	.admonitionblock.note .icon-note::before, .admonitionblock .tip .icon-tip::before {content: "\ea0c"; color: #1B7387;}
    .admonitionblock.important .icon-important::before {content: "\ea07"; color: #22836A;}
    .admonitionblock.warning .icon-warning::before {content: "\f08f"; color: #BC5E2E;}
    .admonitionblock.caution .icon-caution::before {content: "\ea08"; color: #D2A854;}
    .admonitionblock .icon {font-size: 3.5em; padding: .25em; border-right: 3px solid #E3E4E3;}
    .admonitionblock .content {vertical-align: middle; padding: .25em;}
*/


.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;padding:1em;font-size:.8125em}
.literalblock pre.nowrap,.literalblock pre[class].nowrap,.listingblock pre.nowrap,.listingblock pre[class].nowrap{overflow-x:auto;white-space:pre;word-wrap:normal}
@media only screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}@media only screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]:before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]:before{display:block}
.listingblock.terminal pre .command:before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt]):before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #ddddd8}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock blockquote p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote:before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.5em;margin-right:.5ex;text-align:right}
.quoteblock .quoteblock{margin-left:0;margin-right:0;padding:.5em 0;border-left:3px solid rgba(0,0,0,.6)}
.quoteblock .quoteblock blockquote{padding:0 0 0 .75em}
.quoteblock .quoteblock blockquote:before{display:none}
.verseblock{margin:0 1em 1.25em 1em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.05em;color:rgba(0,0,0,.6)}
.quoteblock.abstract{margin:0 0 1.25em 0;display:block}
.quoteblock.abstract blockquote,.quoteblock.abstract blockquote p{text-align:left;word-spacing:0}
.quoteblock.abstract blockquote:before,.quoteblock.abstract blockquote p:first-of-type:before{display:none}
table.tableblock{max-width:100%;border-collapse:separate}
table.tableblock td>.paragraph:last-child p>p:last-child,table.tableblock th>p:last-child,table.tableblock td>p:last-child{margin-bottom:0}
table.spread{width:100%}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all th.tableblock,table.grid-all td.tableblock{border-width:0 1px 1px 0}
table.grid-all tfoot>tr>th.tableblock,table.grid-all tfoot>tr>td.tableblock{border-width:1px 1px 0 0}
table.grid-cols th.tableblock,table.grid-cols td.tableblock{border-width:0 1px 0 0}
table.grid-all *>tr>.tableblock:last-child,table.grid-cols *>tr>.tableblock:last-child{border-right-width:0}
table.grid-rows th.tableblock,table.grid-rows td.tableblock{border-width:0 0 1px 0}
table.grid-all tbody>tr:last-child>th.tableblock,table.grid-all tbody>tr:last-child>td.tableblock,table.grid-all thead:last-child>tr>th.tableblock,table.grid-rows tbody>tr:last-child>th.tableblock,table.grid-rows tbody>tr:last-child>td.tableblock,table.grid-rows thead:last-child>tr>th.tableblock{border-bottom-width:0}
table.grid-rows tfoot>tr>th.tableblock,table.grid-rows tfoot>tr>td.tableblock{border-width:1px 0 0 0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot{border-width:1px 0}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.unstyled,ol.unnumbered,ul.checklist,ul.none{list-style-type:none}
ul.unstyled,ol.unnumbered,ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1em;font-size:.85em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{width:1em;position:relative;top:1px}
ul.inline{margin:0 auto .625em auto;margin-left:-1.375em;margin-right:0;padding:0;list-style:none;overflow:hidden}
ul.inline>li{list-style:none;float:left;margin-left:1.375em;display:block}
ul.inline>li>*{display:block}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1{padding-right:.75em;font-weight:bold}
td.hdlist1,td.hdlist2{vertical-align:top}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist>table tr>td:first-of-type{padding:0 .75em;line-height:1}
.colist>table tr>td:last-of-type{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left,.imageblock[style*="float: left"]{margin:.25em .625em 1.25em 0}
.imageblock.right,.imageblock[style*="float: right"]{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none}
span.footnote,span.footnoteref{vertical-align:super;font-size:.875em}
span.footnote a,span.footnoteref a{text-decoration:none}
span.footnote a:active,span.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em 0;border-width:1px 0 0 0}
#footnotes .footnote{padding:0 .375em;line-height:1.3;font-size:.875em;margin-left:1.2em;text-indent:-1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note:before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip:before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning:before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution:before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important:before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]:after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
h1,h2{letter-spacing:-.01em}
dt,th.tableblock,td.content{text-rendering:optimizeLegibility}
p,td.content{letter-spacing:-.01em}
p strong,td.content strong{letter-spacing:-.005em}
p,blockquote,dt,td.content{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@media print{@page{margin:1.25cm .75cm}
*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare):after,a[href^="https:"]:not(.bare):after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]:after{content:" (" attr(title) ")"}
pre,blockquote,tr,img{page-break-inside:avoid}
thead{display:table-header-group}
img{max-width:100%!important}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #ddddd8!important;padding-bottom:0!important}
.sect1{padding-bottom:0!important}
.sect1+.sect1{border:0!important}
#header>h1:first-child{margin-top:1.25rem}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em 0}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span:before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]:before{display:block}
#footer{background:none!important;padding:0 .9375em}
#footer-text{color:rgba(0,0,0,.6)!important;font-size:.9em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}</style>
<style>/* Stylesheet for CodeRay to match GitHub theme | MIT License | http://foundation.zurb.com */
/*pre.CodeRay {background-color:#f7f7f8;}*/
.CodeRay .line-numbers{border-right:1px solid #d8d8d8;padding:0 0.5em 0 .25em}
.CodeRay span.line-numbers{display:inline-block;margin-right:.5em;color:rgba(0,0,0,.3)}
.CodeRay .line-numbers strong{font-weight: normal}
table.CodeRay{border-collapse:separate;border-spacing:0;margin-bottom:0;border:0;background:none}
table.CodeRay td{vertical-align: top}
table.CodeRay td.line-numbers{text-align:right}
table.CodeRay td.line-numbers>pre{padding:0;color:rgba(0,0,0,.3)}
table.CodeRay td.code{padding:0 0 0 .5em}
table.CodeRay td.code>pre{padding:0}
.CodeRay .debug{color:#fff !important;background:#000080 !important}
.CodeRay .annotation{color:#007}
.CodeRay .attribute-name{color:#000080}
.CodeRay .attribute-value{color:#700}
.CodeRay .binary{color:#509}
.CodeRay .comment{color:#998;font-style:italic}
.CodeRay .char{color:#04d}
.CodeRay .char .content{color:#04d}
.CodeRay .char .delimiter{color:#039}
.CodeRay .class{color:#458;font-weight:bold}
.CodeRay .complex{color:#a08}
.CodeRay .constant,.CodeRay .predefined-constant{color:#008080}
.CodeRay .color{color:#099}
.CodeRay .class-variable{color:#369}
.CodeRay .decorator{color:#b0b}
.CodeRay .definition{color:#099}
.CodeRay .delimiter{color:#000}
.CodeRay .doc{color:#970}
.CodeRay .doctype{color:#34b}
.CodeRay .doc-string{color:#d42}
.CodeRay .escape{color:#666}
.CodeRay .entity{color:#800}
.CodeRay .error{color:#808}
.CodeRay .exception{color:inherit}
.CodeRay .filename{color:#099}
.CodeRay .function{color:#900;font-weight:bold}
.CodeRay .global-variable{color:#008080}
.CodeRay .hex{color:#058}
.CodeRay .integer,.CodeRay .float{color:#099}
.CodeRay .include{color:#555}
.CodeRay .inline{color:#00}
.CodeRay .inline .inline{background:#ccc}
.CodeRay .inline .inline .inline{background:#bbb}
.CodeRay .inline .inline-delimiter{color:#d14}
.CodeRay .inline-delimiter{color:#d14}
.CodeRay .important{color:#555;font-weight:bold}
.CodeRay .interpreted{color:#b2b}
.CodeRay .instance-variable{color:#008080}
.CodeRay .label{color:#970}
.CodeRay .local-variable{color:#963}
.CodeRay .octal{color:#40e}
.CodeRay .predefined{color:#369}
.CodeRay .preprocessor{color:#579}
.CodeRay .pseudo-class{color:#555}
.CodeRay .directive{font-weight:bold}
.CodeRay .type{font-weight:bold}
.CodeRay .predefined-type{color:inherit}
.CodeRay .reserved,.CodeRay .keyword {color:#000;font-weight:bold}
.CodeRay .key{color:#808}
.CodeRay .key .delimiter{color:#606}
.CodeRay .key .char{color:#80f}
.CodeRay .value{color:#088}
.CodeRay .regexp .delimiter{color:#808}
.CodeRay .regexp .content{color:#808}
.CodeRay .regexp .modifier{color:#808}
.CodeRay .regexp .char{color:#d14}
.CodeRay .regexp .function{color:#404;font-weight:bold}
.CodeRay .string{color:#d20}
.CodeRay .string .string .string{background:#ffd0d0}
.CodeRay .string .content{color:#d14}
.CodeRay .string .char{color:#d14}
.CodeRay .string .delimiter{color:#d14}
.CodeRay .shell{color:#d14}
.CodeRay .shell .delimiter{color:#d14}
.CodeRay .symbol{color:#990073}
.CodeRay .symbol .content{color:#a60}
.CodeRay .symbol .delimiter{color:#630}
.CodeRay .tag{color:#008080}
.CodeRay .tag-special{color:#d70}
.CodeRay .variable{color:#036}
.CodeRay .insert{background:#afa}
.CodeRay .delete{background:#faa}
.CodeRay .change{color:#aaf;background:#007}
.CodeRay .head{color:#f8f;background:#505}
.CodeRay .insert .insert{color:#080}
.CodeRay .delete .delete{color:#800}
.CodeRay .change .change{color:#66f}
.CodeRay .head .head{color:#f4f}</style>
</head>
<body class="article">
<div id="header">
<div class="brand"></div>
<h1>DS220: Data Modeling</h1>
</div>
<div id="content">
<div class="sect1">
<h2 id="exercise-1-setting-up-the-lab-environment-solution-and-instructor-notes">Exercise 1: Setting Up The Lab Environment&#8212;&#8203;Solution and Instructor Notes</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Instructor note: This challenge is more a tutorial style task than an exercise. Students follow the given instructions to ensure that VirtualBox is installed and the provided virtual machine is working.</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="strong-steps-strong"><strong>Steps</strong></h3>
<div class="ulist">
<ul>
<li>
<p>Follow the steps in the tutorial as is.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="exercise-2-challenge-1-solution-and-instructor-notes">Exercise 2: Challenge 1&#8212;&#8203;Solution and Instructor Notes</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Instructor note: The students will be setting up their keyspace here and creating their first table.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">CREATE</span> KEYSPACE killrvideo
WITH replication = {<span class="string"><span class="delimiter">'</span><span class="content">class</span><span class="delimiter">'</span></span>:<span class="string"><span class="delimiter">'</span><span class="content">SimpleStrategy</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">replication_factor</span><span class="delimiter">'</span></span>: <span class="integer">1</span>};</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql">USE killrvideo;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">CREATE</span> <span class="type">TABLE</span> videos (
  video_id TIMEUUID,
  added_date <span class="predefined-type">TIMESTAMP</span>,
  description <span class="predefined-type">TEXT</span>,
  title <span class="predefined-type">TEXT</span>,
  user_id UUID,
  <span class="directive">PRIMARY</span> <span class="type">KEY</span> (video_id)
);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Instructor note: We didn&#8217;t explicitly put an extra set of parenthesis around the partition key <code>video_id</code> because partitions are coverred in the next section. For now, this looks and feels like a normal relational table.</p>
</li>
<li>
<p>Instructor note:  The CSV file for this table is located in the VM provided for this class at <code>/root/labwork/exercise-2/videos.csv</code>.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql">COPY videos <span class="keyword">FROM</span> <span class="string"><span class="delimiter">'</span><span class="content">videos.csv</span><span class="delimiter">'</span></span> WITH HEADER=<span class="predefined-constant">true</span>;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Instructor note:  If students get an error <code>Can&#8217;t open 'videos.csv'</code>, make sure they started <code>cqlsh</code> in the <code>exercise-2</code> directory, or that they refer to <code>/root/labwork/exercise-2/videos.csv</code> in the COPY command.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span> * <span class="keyword">FROM</span> videos LIMIT <span class="integer">10</span>;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span> <span class="predefined">COUNT</span>(*) <span class="keyword">FROM</span> videos;</code></pre>
</div>
</div>
<div class="paragraph">
<p>This query should count 430 rows.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span> * <span class="keyword">FROM</span> videos <span class="keyword">WHERE</span> video_id = <span class="integer">6</span>c4cffb9<span class="integer">-0</span>dc4<span class="integer">-1</span>d59-af24-c960b5fc3652;</code></pre>
</div>
</div>
<div class="paragraph">
<p>This query should succeed.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="exercise-3-challenge-2-solution-and-instructor-notes">Exercise 3: Challenge 2&#8212;&#8203;Solution and Instructor Notes</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Instructor note: The students will be creating a second table here and loading it with data.  The new concepts in this challenge are partitions and composite partition keys.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">CREATE</span> <span class="type">TABLE</span> videos_by_title_year (
        title <span class="predefined-type">TEXT</span>,
        added_year <span class="predefined-type">INT</span>,
        added_date <span class="predefined-type">TIMESTAMP</span>,
        description <span class="predefined-type">TEXT</span>,
        user_id UUID,
        video_id TIMEUUID,
        <span class="directive">PRIMARY</span> <span class="type">KEY</span> ((title, added_year))
);</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql">COPY videos_by_title_year (title, added_year, added_date, description, user_id, video_id) <span class="keyword">FROM</span> <span class="string"><span class="delimiter">'</span><span class="content">videos_by_title_year.csv</span><span class="delimiter">'</span></span> WITH HEADER=<span class="predefined-constant">true</span>;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Instructor note:  Again, if students cannot open the file for reading, make sure they&#8217;ve started cqlsh in the <code>exercise-3</code> directory, or that it&#8217;s referenced in the COPY command.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span> * <span class="keyword">FROM</span> videos_by_title_year <span class="keyword">WHERE</span> title = <span class="string"><span class="delimiter">'</span><span class="content">Introduction To Apache Cassandra</span><span class="delimiter">'</span></span> <span class="keyword">AND</span> added_year = <span class="integer">2014</span>;
<span class="class">SELECT</span> * <span class="keyword">FROM</span> videos_by_title_year <span class="keyword">WHERE</span> title = <span class="string"><span class="delimiter">'</span><span class="content">Sleepy Grumpy Cat</span><span class="delimiter">'</span></span> <span class="keyword">AND</span> added_year = <span class="integer">2015</span>;
<span class="class">SELECT</span> * <span class="keyword">FROM</span> videos_by_title_year <span class="keyword">WHERE</span> title = <span class="string"><span class="delimiter">'</span><span class="content">Grumpy Cat: Slow Motion</span><span class="delimiter">'</span></span> <span class="keyword">AND</span> added_year = <span class="integer">2015</span>;
<span class="class">SELECT</span> * <span class="keyword">FROM</span> videos_by_title_year <span class="keyword">WHERE</span> title = <span class="string"><span class="delimiter">'</span><span class="content">AzureDev</span><span class="delimiter">'</span></span> <span class="keyword">AND</span> added_year = <span class="integer">2015</span>;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span> * <span class="keyword">FROM</span> videos_by_title_year <span class="keyword">WHERE</span> title = <span class="string"><span class="delimiter">'</span><span class="content">Introduction To Apache Cassandra</span><span class="delimiter">'</span></span>;</code></pre>
</div>
</div>
<div class="paragraph">
<p>This query fails with error:
<code>InvalidRequest: code=2200 [Invalid query] message="Partition key part added_year must be restricted since preceding part is"</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span> * <span class="keyword">FROM</span> videos_by_title_year <span class="keyword">WHERE</span> added_year = <span class="integer">2015</span>;</code></pre>
</div>
</div>
<div class="paragraph">
<p>This query fails with error:
<code>InvalidRequest: code=2200 [Invalid query] message="Partitioning column "added_year" cannot be restricted because the preceding column ("ColumnDefinition{name=title, type=org.apache.cassandra.db.marshal.UTF8Type, kind=PARTITION_KEY, componentIndex=0, indexName=null, indexType=null}") is either not restricted or is restricted by a non-EQ relation"</code></p>
</div>
<div class="paragraph">
<p>Since both <code>title</code> and <code>added_year</code> are part of the partition key, both are required to query.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="exercise-4-challenge-3-solution-and-instructor-notes">Exercise 4: Challenge 3&#8212;&#8203;Solution and Instructor Notes</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Instructor note: This challenge introduces clustering columns and a problem with the data not loading completely. In this challenge, students will create a poorly defined table that causes upserts when data is loaded. Afterwards students will drop the table and create a working table.</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="strong-steps-strong-2"><strong>Steps</strong></h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">CREATE</span> <span class="type">TABLE</span> bad_videos_by_tag_year (
  tag <span class="predefined-type">text</span>,
  added_year <span class="predefined-type">int</span>,
  added_date <span class="predefined-type">timestamp</span>,
  title <span class="predefined-type">text</span>,
  description <span class="predefined-type">text</span>,
  user_id uuid,
  video_id timeuuid,
  <span class="directive">PRIMARY</span> <span class="type">KEY</span> ((video_id))
);</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql">COPY bad_videos_by_tag_year (tag, added_year, video_id, added_date, description, title, user_id) <span class="keyword">FROM</span> <span class="string"><span class="delimiter">'</span><span class="content">videos_by_tag_year.csv</span><span class="delimiter">'</span></span> WITH HEADER=<span class="predefined-constant">true</span>;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span> <span class="predefined">COUNT</span>(*)
<span class="keyword">FROM</span> bad_videos_by_tag_year;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">DROP</span> <span class="type">TABLE</span> bad_videos_by_tag_year;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">CREATE</span> <span class="type">TABLE</span> videos_by_tag_year (
  tag <span class="predefined-type">text</span>,
  added_year <span class="predefined-type">int</span>,
  video_id timeuuid,
  added_date <span class="predefined-type">timestamp</span>,
  description <span class="predefined-type">text</span>,
  title <span class="predefined-type">text</span>,
  user_id uuid,
  <span class="directive">PRIMARY</span> <span class="type">KEY</span> ((tag), added_year, video_id)
) WITH CLUSTERING <span class="keyword">ORDER</span> <span class="keyword">BY</span> (added_year <span class="directive">desc</span>, video_id <span class="directive">asc</span>);</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql">COPY videos_by_tag_year <span class="keyword">FROM</span> <span class="string"><span class="delimiter">'</span><span class="content">videos_by_tag_year.csv</span><span class="delimiter">'</span></span> WITH HEADER=<span class="predefined-constant">true</span>;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span> * <span class="keyword">FROM</span> videos_by_tag_year <span class="keyword">WHERE</span> tag = <span class="string"><span class="delimiter">'</span><span class="content">trailer</span><span class="delimiter">'</span></span> <span class="keyword">AND</span> added_year = <span class="integer">2015</span>;
<span class="class">SELECT</span> * <span class="keyword">FROM</span> videos_by_tag_year <span class="keyword">WHERE</span> tag = <span class="string"><span class="delimiter">'</span><span class="content">cql</span><span class="delimiter">'</span></span> <span class="keyword">AND</span> added_year = <span class="integer">2014</span>;
<span class="class">SELECT</span> * <span class="keyword">FROM</span> videos_by_tag_year <span class="keyword">WHERE</span> tag = <span class="string"><span class="delimiter">'</span><span class="content">spark</span><span class="delimiter">'</span></span> <span class="keyword">AND</span> added_year = <span class="integer">2014</span>;</code></pre>
</div>
</div>
<div class="paragraph">
<p>They all work!</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span> <span class="predefined">COUNT</span>(*) <span class="keyword">FROM</span> videos_by_tag_year;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The number of rows counted should match the number of imported rows (797).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span> * <span class="keyword">FROM</span> videos_by_tag_year <span class="keyword">WHERE</span> tag = <span class="string"><span class="delimiter">'</span><span class="content">cql</span><span class="delimiter">'</span></span> <span class="keyword">AND</span> added_year &lt; <span class="integer">2015</span>;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span> * <span class="keyword">FROM</span> videos_by_tag_year <span class="keyword">WHERE</span> added_year &lt; <span class="integer">2015</span>;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The error returned is <code>InvalidRequest: code=2200 [Invalid query] message="Cannot execute this query as it might involve data filtering and thus may have unpredictable performance. If you want to execute this query despite the performance unpredictability, use ALLOW FILTERING"</code></p>
</div>
<div class="paragraph">
<p>This is because the partition column <code>tag</code> was not queried, which would mean all of the partitions in the table would have to be filtered to get the results for the query.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="exercise-5-challenge-4-solution-and-instructor-notes">Exercise 5: Challenge 4&#8212;&#8203;Solution and Instructor Notes</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Instructor note: The students will start by truncating the <code>videos</code> table to remove the data. From here they will alter the table to add the tags and video_metadata columns and to load the table with the given CSV file.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">TRUNCATE</span> videos;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Instructor note: The students will alter the <code>videos</code> table to include tags and UDT encoding.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">ALTER</span> <span class="type">TABLE</span> videos <span class="class">ADD</span> tags <span class="class">SET</span>&lt;<span class="predefined-type">TEXT</span>&gt;;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql">COPY videos <span class="keyword">FROM</span> <span class="string"><span class="delimiter">'</span><span class="content">videos.csv</span><span class="delimiter">'</span></span> WITH HEADER=<span class="predefined-constant">true</span>;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">CREATE</span> TYPE video_encoding (
   bit_rates <span class="class">SET</span>&lt;<span class="predefined-type">TEXT</span>&gt;,
   encoding <span class="predefined-type">TEXT</span>,
   height <span class="predefined-type">INT</span>,
   width <span class="predefined-type">INT</span>,
);</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">ALTER</span> <span class="type">TABLE</span> videos <span class="class">ADD</span> encoding FROZEN&lt;video_encoding&gt;;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql">COPY videos (video_id, encoding) <span class="keyword">FROM</span> <span class="string"><span class="delimiter">'</span><span class="content">videos_encoding.csv</span><span class="delimiter">'</span></span> WITH HEADER=<span class="predefined-constant">true</span>;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span> * <span class="keyword">FROM</span> videos LIMIT <span class="integer">10</span>;</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="exercise-6-challenge-5-solution-and-instructor-notes">Exercise 6: Challenge 5&#8212;&#8203;Solution and Instructor Notes</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Instructor note: The students will create a new table that includes a counter.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">CREATE</span> <span class="type">TABLE</span> videos_count_by_tag (
   tag <span class="predefined-type">TEXT</span>,
   added_year <span class="predefined-type">INT</span>,
   video_count counter,
   <span class="directive">PRIMARY</span> <span class="type">KEY</span> (tag, added_year)
);</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql">SOURCE <span class="string"><span class="delimiter">'</span><span class="content">videos_count_by_tag.cql</span><span class="delimiter">'</span></span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span> * <span class="keyword">FROM</span> videos_count_by_tag;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">UPDATE</span> videos_count_by_tag <span class="class">SET</span> video_count = video_count + <span class="integer">1</span>
<span class="keyword">WHERE</span> tag = <span class="string"><span class="delimiter">'</span><span class="content">cassandra</span><span class="delimiter">'</span></span> <span class="keyword">AND</span> added_year = <span class="integer">2015</span>;

<span class="class">SELECT</span> * <span class="keyword">FROM</span> videos_count_by_tag <span class="keyword">WHERE</span> tag = <span class="string"><span class="delimiter">'</span><span class="content">cassandra</span><span class="delimiter">'</span></span> <span class="keyword">AND</span> added_year = <span class="integer">2015</span>;</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="exercise-7-challenge-6-solution-and-instructor-notes">Exercise 7: Challenge 6&#8212;&#8203;Solution and Instructor Notes</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Instructor note: This challenge will add two new tables to the schema but do not show any added CQL functionality.</p>
</li>
<li>
<p>The purpose of this challenge is to illustrate the constant adding of functionality on an as-needed basis without true data modeling design. It also highlights some denormalization techniques.</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="strong-create-a-videos_by_actor-table-strong"><strong>Create a videos_by_actor table</strong></h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">CREATE</span> TYPE <span class="keyword">IF</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> video_encoding (
   encoding <span class="predefined-type">TEXT</span>,
   height <span class="predefined-type">INT</span>,
   width <span class="predefined-type">INT</span>,
   bit_rates <span class="class">SET</span>&lt;<span class="predefined-type">TEXT</span>&gt;
);

<span class="class">CREATE</span> <span class="type">TABLE</span> videos_by_actor (
  actor <span class="predefined-type">TEXT</span>,
  added_date <span class="predefined-type">TIMESTAMP</span>,
  video_id TIMEUUID,
  character_name <span class="predefined-type">TEXT</span>,
  description <span class="predefined-type">TEXT</span>,
  encoding FROZEN&lt;video_encoding&gt;,
  tags <span class="class">SET</span>&lt;<span class="predefined-type">TEXT</span>&gt;,
  title <span class="predefined-type">TEXT</span>,
  user_id UUID,
  <span class="directive">PRIMARY</span> <span class="type">KEY</span> ((actor), added_date, video_id, character_name)
) WITH CLUSTERING <span class="keyword">ORDER</span> <span class="keyword">BY</span> (added_date <span class="directive">DESC</span>, video_id <span class="directive">ASC</span>, character_name <span class="directive">ASC</span>);</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql">COPY videos_by_actor <span class="keyword">FROM</span> <span class="string"><span class="delimiter">'</span><span class="content">videos_by_actor.csv</span><span class="delimiter">'</span></span> WITH HEADER = <span class="predefined-constant">true</span>;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span> * <span class="keyword">FROM</span> videos_by_actor <span class="keyword">WHERE</span> actor = <span class="string"><span class="delimiter">'</span><span class="content">Leonardo DiCaprio</span><span class="delimiter">'</span></span> LIMIT <span class="integer">10</span>;

<span class="class">SELECT</span> actor, added_date <span class="keyword">FROM</span> videos_by_actor <span class="keyword">WHERE</span> actor = <span class="string"><span class="delimiter">'</span><span class="content">Leonardo DiCaprio</span><span class="delimiter">'</span></span> LIMIT <span class="integer">10</span>;</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="strong-create-a-videos_by_genre-table-strong"><strong>Create a videos_by_genre table</strong></h4>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">CREATE</span> TYPE <span class="keyword">IF</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> video_encoding (
   encoding <span class="predefined-type">TEXT</span>,
   height <span class="predefined-type">INT</span>,
   width <span class="predefined-type">INT</span>,
   bit_rates <span class="class">SET</span>&lt;<span class="predefined-type">TEXT</span>&gt;
);

<span class="class">CREATE</span> <span class="type">TABLE</span> videos_by_genre (
  genre <span class="predefined-type">TEXT</span>,
  added_date <span class="predefined-type">TIMESTAMP</span>,
  video_id TIMEUUID,
  description <span class="predefined-type">TEXT</span>,
  encoding FROZEN&lt;video_encoding&gt;,
  tags <span class="class">SET</span>&lt;<span class="predefined-type">TEXT</span>&gt;,
  title <span class="predefined-type">TEXT</span>,
  user_id UUID,
  <span class="directive">PRIMARY</span> <span class="type">KEY</span> ((genre), added_date, video_id)
) WITH CLUSTERING <span class="keyword">ORDER</span> <span class="keyword">BY</span> (added_date <span class="directive">DESC</span>, video_id <span class="directive">ASC</span>);</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql">COPY videos_by_genre <span class="keyword">FROM</span> <span class="string"><span class="delimiter">'</span><span class="content">videos_by_genre.csv</span><span class="delimiter">'</span></span> WITH HEADER = <span class="predefined-constant">true</span>;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span> * <span class="keyword">FROM</span> videos_by_genre <span class="keyword">WHERE</span> genre = <span class="string"><span class="delimiter">'</span><span class="content">Musical</span><span class="delimiter">'</span></span> LIMIT <span class="integer">10</span>;</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="exercise-8-final-challenge-solution-and-instructor-notes">Exercise 8: Final Challenge&#8212;&#8203;Solution and Instructor Notes</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Instructor notes: The purpose of this challenge is to illustrate how easy it is to "Hit a Wall" when the application requirements grow exponentially. You should only allow about 10 minutes or so for students to start adding to their domain without proper data modeling techniques. At the end of 10 minutes, open up a discussion about the student&#8217;s process and any frustration that they felt.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>There is no "solution" to this roadmap.  You will actually spend the rest of class satisfying all the requirements for KillrVideo by following a data modeling methodology.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="exercise-9-model-the-killrvideo-entities-solution-and-instructor-notes">Exercise 9: Model the KillrVideo Entities&#8212;&#8203;Solution and Instructor Notes</h2>
<div class="sectionbody">
<div class="imageblock">
<div class="content">
<img alt="killrvideo conceptual" src="images/cassandra/dev/data-modeling/conceptual/entity-relationship-model/fundamentals/killrvideo-conceptual.svg">
</div>
</div>
<div class="paragraph">
<p>This is one possible solution to the KillrVideo domain. Notice <strong>Video</strong> has several attributes that will be better expressed using inheritance, shown in hierarchies vertex.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="exercise-10-application-workflow-and-access-patterns-solution-and-instructor-notes">Exercise 10: Application Workflow And Access Patterns&#8212;&#8203;Solution and Instructor Notes</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Instructor note: The students will be using the slides as guidance to finish filling out the application workflow and access patterns.</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img alt="killrvideo workflow" src="images/cassandra/dev/data-modeling/application-workflows-and-access-patterns/killrvideo-workflow.svg">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="exercise-11-extend-the-killrvideo-logical-model">Exercise 11: Extend the KillrVideo Logical Model</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong><em>Q1</em></strong></p>
</div>
<div class="imageblock">
<div class="content">
<img alt="mr q1 solution" src="images/cassandra/dev/data-modeling/logical/mapping-rules/mr-q1-solution.svg">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>What entity type is being stored in a partition or row?</p>
<div class="ulist">
<ul>
<li>
<p>Each partition holds the <code>User posts Video</code> relationship.</p>
</li>
<li>
<p>Each row represents the video and user information for a specific tag.</p>
</li>
</ul>
</div>
</li>
<li>
<p>What are the key attribute(s) for this table?</p>
<div class="ulist">
<ul>
<li>
<p>The key attribute is <code>video_id</code>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>What attribute is used for the partition key(s) that enables the query?</p>
<div class="ulist">
<ul>
<li>
<p>The equality attribute is <code>tag</code>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>What are the clustering column(s) and ordering that support the required results?</p>
<div class="ulist">
<ul>
<li>
<p>The clustering column that support ordering is <em> <code>uploaded_timestamp</code> (DESC)</em>.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong><em>Q2</em></strong></p>
</div>
<div class="imageblock">
<div class="content">
<img alt="mr q2 solution" src="images/cassandra/dev/data-modeling/logical/mapping-rules/mr-q2-solution.svg">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>What entity or relationship type is being stored in a partition or row?</p>
<div class="ulist">
<ul>
<li>
<p>Each partition represents a <code>Video features Actor</code> relationship.</p>
</li>
<li>
<p>Each row represents information for a video the actor was featured in.</p>
</li>
</ul>
</div>
</li>
<li>
<p>What are the key attribute(s) for this table?</p>
<div class="ulist">
<ul>
<li>
<p>The key attributes are <code>actor_name</code> and <code>video_id</code>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>What attribute is used for the partition key(s) that enabled the query?</p>
<div class="ulist">
<ul>
<li>
<p>The equality attribute is <code>actor_name</code>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>What attribute is used for the cluster column(s) that enables the inequality / range scan?</p>
<div class="ulist">
<ul>
<li>
<p>The inequality attribute is <code>release_year</code>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>What are the clustering column(s) and ordering that support the required results?</p>
<div class="ulist">
<ul>
<li>
<p>The clustering columns that support ordering is <em> <code>release_year</code> (DESC)</em> and <em> <code>title</code> (ASC)</em>.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong><em>Q3</em></strong></p>
</div>
<div class="imageblock">
<div class="content">
<img alt="mr q3 solution" src="images/cassandra/dev/data-modeling/logical/mapping-rules/mr-q3-solution.svg">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>What entity or relationship type is being stored in a partition or row?</p>
<div class="ulist">
<ul>
<li>
<p>Each partition represents a <code>Video features Actor</code> relationship.</p>
</li>
<li>
<p>Each row represents video information for a specific genre and actor.</p>
</li>
</ul>
</div>
</li>
<li>
<p>What are the key attribute(s) for this table?</p>
<div class="ulist">
<ul>
<li>
<p>The key attributes are <code>actor_name</code> and <code>video_id</code>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>What attribute is used for the partition key(s) that enabled the query?</p>
<div class="ulist">
<ul>
<li>
<p>The equality attributes are <code>genre</code> and <code>actor_name</code>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>What attribute is used for the cluster column(s) that enables the inequality / range scan?</p>
<div class="ulist">
<ul>
<li>
<p>The inequality attribute is <code>release_year</code>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>What are the clustering column(s) and ordering that support the required results?</p>
<div class="ulist">
<ul>
<li>
<p>The clustering columns that support ordering is <em> <code>release_year</code> (DESC)</em> and <em> <code>title</code> (ASC)</em>.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="exercise-12-map-additional-requirements-for-the-killrvideo-logical-model">Exercise 12: Map additional requirements for the KillrVideo logical model</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong><em>Q1</em></strong></p>
</div>
<div class="imageblock">
<div class="content">
<img alt="mp q1 solution" src="images/cassandra/dev/data-modeling/logical/mapping-patterns/mp-q1-solution.svg">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>What mapping pattern best matches the requirements for this query?</p>
<div class="ulist">
<ul>
<li>
<p>Entity mapping pattern 1.2</p>
</li>
</ul>
</div>
</li>
<li>
<p>Did the search attributes for this query match the key attributes for the entity / relationship type?</p>
<div class="ulist">
<ul>
<li>
<p>No</p>
</li>
</ul>
</div>
</li>
<li>
<p>What needed to be done to support the range search for modified timestamp?</p>
<div class="ulist">
<ul>
<li>
<p>Use modified_timestamp as a clustering column</p>
</li>
</ul>
</div>
</li>
<li>
<p>Was there any data nesting done?</p>
<div class="ulist">
<ul>
<li>
<p>Yes, because we are nesting playlists in user partitions based on the user-adds-playlist relationships. Remember that clustering columns are a data nesting mechanism.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Would data duplication occur in this table?</p>
<div class="ulist">
<ul>
<li>
<p>No</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong><em>Q2</em></strong></p>
</div>
<div class="imageblock">
<div class="content">
<img alt="mp q2 solution" src="images/cassandra/dev/data-modeling/logical/mapping-patterns/mp-q2-solution.svg">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>What mapping pattern best matches the requirements for this query?</p>
<div class="ulist">
<ul>
<li>
<p>m:n relationship mapping pattern 4.1</p>
</li>
</ul>
</div>
</li>
<li>
<p>Did the search attributes for this query match the key attributes for the entity / relationship type?</p>
<div class="ulist">
<ul>
<li>
<p>Yes, searching on <code>subscriber_id</code>, which uniquely identifies <code>User</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>Were there any columns that made sense to make static?</p>
<div class="ulist">
<ul>
<li>
<p>Yes, <code>firstname</code>, <code>lastname</code>, <code>email</code>, and <code>registration_date</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>Was there any data nesting done?</p>
<div class="ulist">
<ul>
<li>
<p>Yes, <code>Channel</code> is nested by <code>User</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>Would data duplication occur in this table?</p>
<div class="ulist">
<ul>
<li>
<p>Yes, <code>Channel</code> attributes will be duplicated across multiple <code>User</code> accounts</p>
</li>
</ul>
</div>
</li>
<li>
<p>Were there any attributes that would have had potentially excessive data duplication?</p>
<div class="ulist">
<ul>
<li>
<p>No</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong><em>Q3</em></strong></p>
</div>
<div class="imageblock">
<div class="content">
<img alt="mp q3 solution" src="images/cassandra/dev/data-modeling/logical/mapping-patterns/mp-q3-solution.svg">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>What mapping pattern best matches the requirements for this query?</p>
<div class="ulist">
<ul>
<li>
<p>m:n relationship mapping pattern 4.1</p>
</li>
</ul>
</div>
</li>
<li>
<p>Did the search attributes for this query match the key attributes for the entity / relationship type?</p>
<div class="ulist">
<ul>
<li>
<p>Yes, searching on <code>owner_id</code>, which uniquely identifies <code>Channel</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>Were there any columns that made sense to make static?</p>
<div class="ulist">
<ul>
<li>
<p>Yes, <code>channel_name</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>Was there any data nesting done?</p>
<div class="ulist">
<ul>
<li>
<p>Yes, <code>Video</code> is nested by <code>Channel</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>Would data duplication occur in this table?</p>
<div class="ulist">
<ul>
<li>
<p>Yes, <code>Video</code> attributes will be duplicated across multiple <code>Channel</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>Were there any attributes that would have had potentially excessive data duplication?</p>
<div class="ulist">
<ul>
<li>
<p>Yes, duplication across partitions. If a video is added to 100 channels, its title and description will be duplicated 100 times.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="exercise-13-figuring-out-partition-size">Exercise 13: Figuring Out Partition Size</h2>
<div class="sectionbody">
<div class="paragraph">
<p>1) Use the formula to estimate the number of values for co-worker #1&#8217;s <code>videos_by_user</code> for an average user, an active user, and the worst case.</p>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p><strong>Co-worker #1 Table</strong><br>
Total number of columns = 7<br>
Number of primary key columns = 3<br>
Number of static columns = 0<br></p>
</div>
<div class="paragraph">
<p><strong>Average User</strong> = 15 CQL rows<br>
15 * (7 - 3 - 0) + 0 = 60 values per partition<br></p>
</div>
<div class="paragraph">
<p><strong>Active User</strong> = 500 CQL rows<br>
500 * (7 - 3 - 0) + 0 = 2,000 values per partition<br></p>
</div>
<div class="paragraph">
<p><strong>Worst Case</strong> = 40,000 CQL rows<br>
40000 * (7 - 3 - 0) + 0 = 160,000 values per partition<br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>2) Use the formula to estimate the number of values for co-worker #2&#8217;s <code>videos_by_user</code> for an average user, an active user, and the worst case.</p>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p><strong>Co-worker #2 Table</strong><br>
Total number of columns = 7<br>
Number of primary key columns = 5<br>
Number of static columns = 0<br></p>
</div>
<div class="paragraph">
<p><strong>Average User</strong> = 15 CQL rows<br>
   15 * (7 - 5 - 0) + 0 = 30 values per partition<br></p>
</div>
<div class="paragraph">
<p><strong>Active User</strong> = 500 CQL rows<br>
   500 * (7 - 5 - 0) + 0 = 1,000 values per partition<br></p>
</div>
<div class="paragraph">
<p><strong>Worst Case</strong> = 40,000 CQL rows<br>
   40000 * (7 - 5 - 0) + 0 = 80,000 values per partition<br></p>
</div>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Based on the analysis of the number of values per partition for each table, which table is more efficient?</p>
<div class="literalblock">
<div class="content">
<pre>Co-worker #2's videos_by_user table</pre>
</div>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>3) Use the formula to estimate the data size for co-worker #1&#8217;s <code>videos_by_user</code> for an average user, an active user, and the worst case.</p>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p><strong>Co-worker #1 Table</strong><br>
Total size of partition columns = 16 bytes<br>
Total size of static columns = 0 bytes<br>
Total size of clustering columns = 8 + 16 = 24 bytes<br>
Total size of regular columns = (55 + 24) + (12 + 24) + (30 + 24) + (2340 + 24) = 2,533 bytes<br></p>
</div>
<div class="paragraph">
<p><strong>Average User</strong> = 15 CQL rows, 60 values per partition<br>
   16 + 0 + (15 * 2533) + (8 * 60) = 38,491 bytes<br></p>
</div>
<div class="paragraph">
<p><strong>Active User</strong> = 500 CQL rows, 2,000 per partition<br>
   16 + 0 + (500 * 2533) + (8 * 2000) = 1,282,516 bytes or ~1.22 MB<br></p>
</div>
<div class="paragraph">
<p><strong>Worst Case</strong> = 40,000 CQL rows, 160,000 values per partition<br>
   16 + 0 + (40000 * 2533) + (8 * 160000) = 102,600,016 bytes or ~97.85 MB<br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>4) Use the formula to estimate the data size for co-worker #2&#8217;s <code>videos_by_user</code> for an average user, an active user, and the worst case.</p>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p><strong>Co-worker #2 Table</strong><br>
Total size of partition columns = 16 bytes<br>
Total size of static columns = 0 bytes<br>
Total size of clustering columns = 8 + 16 + 12 + 55 = 91 bytes<br>
Total size of regular columns = (30 + 91) + (2340 + 91) = 2,552 bytes<br></p>
</div>
<div class="paragraph">
<p><strong>Average User</strong> = 15 CQL rows, 30 values per partition<br>
   16 + 0 + (15 * 2552) + (8 * 30) = 38,536 bytes<br></p>
</div>
<div class="paragraph">
<p><strong>Active User</strong> = 500 CQL rows, 1,000 per partition<br>
   16 + 0 + (500 * 2552) + (8 * 1000) = 1,284,016 bytes or ~1.22 MB<br></p>
</div>
<div class="paragraph">
<p><strong>Worst Case</strong> = 40,000 CQL rows, 80,000 values per partition<br>
   16 + 0 + (40000 * 2552) + (8 * 80000) = 102,720,016 bytes or ~97.96 MB<br></p>
</div>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Based on the analysis of the data size for each table, which table is more efficient?</p>
<div class="literalblock">
<div class="content">
<pre>Co-worker #1's videos_by_user table</pre>
</div>
</div>
</li>
<li>
<p>What factor was more important in this analysis, number of values or data size?</p>
<div class="literalblock">
<div class="content">
<pre>Number of values</pre>
</div>
</div>
</li>
<li>
<p>Overall, which table is the better one to use?</p>
<div class="literalblock">
<div class="content">
<pre>Co-worker #2's videos_by_user table</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="exercise-14-implementing-aggregation-in-your-data-model">Exercise 14: Implementing Aggregation In Your Data Model</h2>
<div class="sectionbody">
<div class="paragraph">
<p>1) Review the above requirement #1.</p>
</div>
<div class="paragraph">
<p>The intern made a table that logs a new entry into the table whenever a user views a video. The original query would have then used the COUNT aggregate to retrieve the number of views for a particular video.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>What is it about the intern&#8217;s design that would not have been very effective in Cassandra?</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>COUNT is inefficient and may require a full table scan. If the amount of data in the table is very large, this can cause the query to take a long time or even timeout.</p>
</div>
<div class="paragraph">
<p>2) Come up with an optimal table schema that meets this requirement using Cassandra.</p>
</div>
<div class="imageblock">
<div class="content">
<img alt="video views" src="images/cassandra/dev/data-modeling/physical/analysis-validation/data-aggregation/video-views.svg">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>What would be the query that can retrieve the count of the number of views for a video for a particular year and month?</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span> num_views <span class="keyword">FROM</span> video_views <span class="keyword">WHERE</span> video_id = <span class="error">?</span> <span class="keyword">AND</span> <span class="predefined-type">year</span> = <span class="error">?</span> <span class="keyword">AND</span> month = <span class="error">?</span>;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Is it possible to retrieve the all-time number of views for a video? If possible, what would be the query?<br>
Yes.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span> num_views <span class="keyword">FROM</span> video_views <span class="keyword">where</span> video_id = <span class="error">?</span>;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Is there anything that needs to be done from the application side?<br>
Each row represents the number of views for a month and year. The application would need to sum the number of views for each row before displaying the total.</p>
</li>
<li>
<p>How would your design increment a video&#8217;s view count? Provide the queries and/or write statements needed to do this.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">UPDATE</span> video_views <span class="class">SET</span> num_views = num_views + <span class="integer">1</span> <span class="keyword">WHERE</span> video_id = <span class="error">?</span> <span class="keyword">AND</span> <span class="predefined-type">year</span> = <span class="error">?</span> <span class="keyword">AND</span> month = <span class="error">?</span>;</code></pre>
</div>
</div>
<div class="paragraph">
<p>3) The intern, being ever helpful, suggested that it would be useful to also display the Top 10 videos for each month, based on the number of views.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Would it be possible to query this information in Cassandra? Why or why not?<br>
No, Cassandra is not able to order results by columns that are not clustering columns, such as <code>num_views</code>.</p>
</li>
<li>
<p>If not, is there a way to do this outside of Cassandra using your schema?<br>
The number of views for all videos can be retrieved and then sorted from the application-side.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>4) Review the above requirement #2.</p>
</div>
<div class="paragraph">
<p>5) Modify the existing <code>Videos</code> table and/or come up with your own table schema that will meet these requirements.</p>
</div>
<div class="imageblock">
<div class="content">
<img alt="video statistics" src="images/cassandra/dev/data-modeling/physical/analysis-validation/data-aggregation/video-statistics.svg">
</div>
</div>
<div class="imageblock">
<div class="content">
<img alt="video statistics counter" src="images/cassandra/dev/data-modeling/physical/analysis-validation/data-aggregation/video-statistics-counter.svg">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>What is the query to retrieve the total number of uploaded videos for a particular date?</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span> num_uploads <span class="keyword">FROM</span> video_statistics_counter <span class="keyword">WHERE</span> <span class="predefined-type">year</span> = <span class="error">?</span> <span class="keyword">AND</span> month = <span class="error">?</span> <span class="keyword">AND</span> day = <span class="error">?</span>;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>What is the query to retrieve the combined duration of all uploaded videos?</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span> sum_duration <span class="keyword">FROM</span> video_statistics_counter <span class="keyword">WHERE</span> <span class="predefined-type">year</span> = <span class="error">?</span> <span class="keyword">AND</span> month = <span class="error">?</span> <span class="keyword">AND</span> day = <span class="error">?</span>;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>What is the query to get the average duration of an uploaded video?</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span> avg_duration <span class="keyword">FROM</span> video_statistics <span class="keyword">WHERE</span> <span class="predefined-type">year</span> = <span class="error">?</span> <span class="keyword">AND</span> month = <span class="error">?</span> <span class="keyword">AND</span> day = <span class="error">?</span>;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Explain how these values are updated whenever a new video is uploaded.<br>
Retrieve the duration (in seconds) of the uploaded video.<br>
The columns in <code>video-statistics-counter</code> would be updated first, using the current date:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">UPDATE</span> video-statistics-counter <span class="class">SET</span> num_uploads = num_uploads + <span class="integer">1</span>, sum_duration = sum_duration + <span class="error">?</span>
<span class="keyword">WHERE</span> <span class="predefined-type">year</span> = <span class="error">?</span> <span class="keyword">AND</span> month = <span class="error">?</span> <span class="keyword">AND</span> day = <span class="error">?</span>;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Retrieve the new number of uploaded videos and total duration:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span> num_videos, sum_duration <span class="keyword">FROM</span> video_statistics_counter
<span class="keyword">WHERE</span> <span class="predefined-type">YEAR</span> = <span class="error">?</span> <span class="keyword">AND</span> month = <span class="error">?</span> <span class="keyword">AND</span> day = <span class="error">?</span>;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Calculate the average duration on the application side using the formula <code>sum_duration</code> / <code>num_videos</code>.<br>
Store the result in <code>avg_duration</code> in <code>video-statistics</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">UPDATE</span> video-statistics <span class="class">SET</span> avg_duration = <span class="error">?</span>
<span class="keyword">WHERE</span> <span class="predefined-type">year</span> = <span class="error">?</span> <span class="keyword">AND</span> month = <span class="error">?</span> <span class="keyword">AND</span> day = <span class="error">?</span>;</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="exercise-15-table-optimizations-solution-and-instructor-notes">Exercise 15: Table Optimizations&#8212;&#8203;Solution and Instructor Notes</h2>
<div class="sectionbody">
<div class="paragraph">
<p>1) Given the worst case scenario, the <code>preview_thumbnails</code> column would be:
6 hours * 60 minutes per hour * 60 seconds per minute / 20 seconds per image * 20 KB per image = 21,600 KB or ~21 MB</p>
</div>
<div class="paragraph">
<p>Since there is only one video stored per partition in the <code>videos</code> table, these partitions should be manageable.</p>
</div>
<div class="paragraph">
<p>2) Using the column size of 21 MB that we just calculated, we can multiply by 500 to get the total size of 10,500 MB or 10 GB.</p>
</div>
<div class="paragraph">
<p>The size of this partition may make it unmanageable, performance-wise, and would benefit from splitting the partition in some way.</p>
</div>
<div class="paragraph">
<p>One possibility would be to add a part of uploaded timestamp as the partition key, which will only store in one partition the videos uploaded by the user during a certain time range. Reasonable durations may include all videos uploaded within an hour period, a day, or even a week.</p>
</div>
<div class="imageblock">
<div class="content">
<img alt="exercise solution 1" src="images/cassandra/dev/data-modeling/physical/table-optimizations/exercise-solution-1.svg">
</div>
</div>
<div class="paragraph">
<p>3) The column that may make the most sense would be the <code>posted_timestamp</code> column. However since it may be possible for users to post numerous comments in a short amount of time, finding an appropriate duration may be a challenge.</p>
</div>
<div class="paragraph">
<p>4) At a minimum, it would be very beneficial to split the table so that the <code>preview_thumbnails</code> column is centralized in a different table. If we take a look at the <code>videos</code> table, it already contains the <code>preview_thumbnails</code> column. After splitting the <code>comments_by_user</code> table, a query will first be directed to that table, and after retrieving the video_id(s), the <code>video</code> table can then be queried to retrieve the <code>preview_thumbnails</code> data for those videos.</p>
</div>
<div class="imageblock">
<div class="content">
<img alt="exercise solution 2" src="images/cassandra/dev/data-modeling/physical/table-optimizations/exercise-solution-2.svg">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="exercise-16-finalizing-physical-data-modeling-solution-and-instructor-notes">Exercise 16: Finalizing Physical Data Modeling&#8212;&#8203;Solution and Instructor Notes</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Instructor note: The students will be using the slides as guidance to finish filling out the physical data model.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">CREATE</span> <span class="type">TABLE</span> users_by_email (
   email <span class="predefined-type">TEXT</span>,
   password <span class="predefined-type">TEXT</span>,
   user_id UUID,
   <span class="directive">PRIMARY</span> <span class="type">KEY</span> ((email))
);</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">CREATE</span> <span class="type">TABLE</span> users (
   user_id UUID,
   email <span class="predefined-type">TEXT</span>,
   first_name <span class="predefined-type">TEXT</span>,
   last_name <span class="predefined-type">TEXT</span>,
   registration_date <span class="predefined-type">TIMESTAMP</span>,
   <span class="directive">PRIMARY</span> <span class="type">KEY</span>((user_id))
);</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">CREATE</span> <span class="type">TABLE</span> videos_by_user (
   user_id UUID,
   video_id TIMEUUID,
   title <span class="predefined-type">TEXT</span>,
   type <span class="predefined-type">TEXT</span>,
   tags <span class="class">SET</span>&lt;<span class="predefined-type">TEXT</span>&gt;,
   preview_thumbnails MAP&lt;<span class="predefined-type">INT</span>,<span class="predefined-type">BLOB</span>&gt;,
   <span class="directive">PRIMARY</span> <span class="type">KEY</span> ((user_id), video_id))
WITH CLUSTERING <span class="keyword">ORDER</span> <span class="keyword">BY</span> (video_id <span class="directive">DESC</span>);</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">CREATE</span> <span class="type">TABLE</span> comments_by_user (
   user_id UUID,
   posted_timestamp <span class="predefined-type">TIMESTAMP</span>,
   video_id TIMEUUID,
   <span class="class">comment</span> <span class="predefined-type">TEXT</span>,
   title <span class="predefined-type">TEXT</span>,
   type <span class="predefined-type">TEXT</span>,
   tags <span class="class">SET</span>&lt;<span class="predefined-type">TEXT</span>&gt;,
   preview_thumbnails MAP&lt;<span class="predefined-type">INT</span>,<span class="predefined-type">BLOB</span>&gt;,
   <span class="directive">PRIMARY</span> <span class="type">KEY</span> ((user_id), posted_timestamp, video_id))
WITH CLUSTERING <span class="keyword">ORDER</span> <span class="keyword">BY</span> (posted_timestamp <span class="directive">DESC</span>, video_id <span class="directive">ASC</span>);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Instructor note: You can suggest taking a look at some of the other tables that already have data types if students are having trouble selecting data types to columns.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>3)</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql">SOURCE <span class="string"><span class="delimiter">'</span><span class="content">killrvideo.cql</span><span class="delimiter">'</span></span>;</code></pre>
</div>
</div>
<div class="paragraph">
<p>4)</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql">DESCRIBE KEYSPACE killr_video;</code></pre>
</div>
</div>
<div class="paragraph">
<p>5)</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql">USE killr_video;</code></pre>
</div>
</div>
<div class="paragraph">
<p>6)</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql">COPY videos <span class="keyword">FROM</span> <span class="string"><span class="delimiter">'</span><span class="content">videos.csv</span><span class="delimiter">'</span></span> WITH HEADER=<span class="predefined-constant">true</span>;

COPY latest_videos <span class="keyword">FROM</span> <span class="string"><span class="delimiter">'</span><span class="content">latest_videos.csv</span><span class="delimiter">'</span></span> WITH HEADER=<span class="predefined-constant">true</span>;

COPY trailers_by_video <span class="keyword">FROM</span> <span class="string"><span class="delimiter">'</span><span class="content">trailers_by_video.csv</span><span class="delimiter">'</span></span> WITH HEADER=<span class="predefined-constant">true</span>;

COPY actors_by_video <span class="keyword">FROM</span> <span class="string"><span class="delimiter">'</span><span class="content">actors_by_video.csv</span><span class="delimiter">'</span></span> WITH HEADER=<span class="predefined-constant">true</span>;</code></pre>
</div>
</div>
<div class="paragraph">
<p>7)</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span> * <span class="keyword">FROM</span> latest_videos LIMIT <span class="integer">50</span>;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Yes, the movie <code>Gone Girl</code> exists and was uploaded with the <code>video_id</code> 8a657435-0ef2-11e5-91b1-8438355b7e3a.</p>
</div>
<div class="paragraph">
<p>8)</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span> * <span class="keyword">FROM</span> videos <span class="keyword">WHERE</span> video_id = <span class="integer">8</span>a657435<span class="error">-</span><span class="error">0</span>ef2<span class="float">-11e5</span><span class="integer">-91</span>b1<span class="integer">-8438355</span>b7e3a;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The movie was first released on September 26, 2014, and is categorized as <em>Drama</em>, <em>Mystery</em>, and <em>Thriller</em>.</p>
</div>
<div class="paragraph">
<p>9)</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span> * <span class="keyword">FROM</span> actors_by_video <span class="keyword">WHERE</span> video_id = <span class="integer">8</span>a657435<span class="error">-</span><span class="error">0</span>ef2<span class="float">-11e5</span><span class="integer">-91</span>b1<span class="integer">-8438355</span>b7e3a;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The character Desi Collings was played by the actor Neil Patrick Harris.</p>
</div>
<div class="paragraph">
<p>10)</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span> * <span class="keyword">FROM</span> trailers_by_video <span class="keyword">WHERE</span> video_id = <span class="integer">8</span>a657435<span class="error">-</span><span class="error">0</span>ef2<span class="float">-11e5</span><span class="integer">-91</span>b1<span class="integer">-8438355</span>b7e3a;</code></pre>
</div>
</div>
<div class="paragraph">
<p>There are three trailers for this movie, and the <code>trailer_id</code> of the first one is 8a65751c-0ef2-11e5-9cac-8438355b7e3a.</p>
</div>
<div class="paragraph">
<p>11)</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span> * <span class="keyword">FROM</span> videos <span class="keyword">WHERE</span> video_id = <span class="integer">8</span>a65751c<span class="error">-</span><span class="error">0</span>ef2<span class="float">-11e5</span><span class="integer">-9</span>cac<span class="integer">-8438355</span>b7e3a;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The URL for this trailer is <a class="bare" href="https://www.youtube.com/watch?v=esGn-xKFZdU">https://www.youtube.com/watch?v=esGn-xKFZdU</a></p>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2017-05-15 21:55:57 PDT
</div>
</div>
</body>
</html>